<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Develop Page</title>
    <script src="https://cdn.jsdelivr.net/gh/kirakiray/ofa.js@4.3.25/dist/ofa.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/gh/kirakiray/ofa.js@4.3.25/libs/scsr/scsr.mjs"
      type="module"
    ></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/obook@2.1.26/statics/css/public.css" />
    <style>
      html,
      body {
        height: 100%;
      }
    </style>
    <script>
      let configUrl = "../../config.json";
    </script>
    
        <link rel="shortcut icon" href="/favicon.png">
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7L1TCCJZT6"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag("js", new Date());

          gtag("config", "G-7L1TCCJZT6");
        </script>
        <script src="/init-sw.js"></script>
      
  </head>
  <body>
    <l-m src="https://cdn.jsdelivr.net/npm/obook@2.1.26/statics/comps/doc-container.html"></l-m>
    <l-m src="https://cdn.jsdelivr.net/npm/obook@2.1.26/statics/comps/doc-header/doc-header.html"></l-m>
    <o-app src="https://cdn.jsdelivr.net/npm/obook@2.1.26/statics/app-config.mjs">
      <template page>
        <style>
          .markdown-body::before,
          .markdown-body::after {
            display: block;
            content: "";
            height: 1px;
          }
          .markdown-body::after {
            height: 32px;
          }
        </style>
        <link
          rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/obook@2.1.26/statics/css/github-markdown.css"
        />
        <article class="markdown-body"><h1>Develop Page</h1>
<p>In ofa.js, we have built a custom component called <code>o-page</code> to provide convenience for page development. This component plays a crucial role in application development. When you want to use component template syntax but don&#39;t want to create a completely new component, <code>o-page</code> component will be your best choice.</p>
<h2>Page Modules</h2>
<p>When creating a single file page module, it is similar to creating a component module. Use the <code>template</code> tag to wrap the template code of the page and add the <code>page</code> attribute. Inside this tag, you can freely use template syntax to interact with other components or page modules.</p>
<pre><code class="language-html">&lt;!-- my-single-file-page.html --&gt;
&lt;template page&gt;
  &lt;h1&gt;{{pageTitle}}&lt;/h1&gt;
  &lt;p&gt;Welcome to my single file page!&lt;/p&gt;
  &lt;script&gt;
    // Avoid using import in single-file mode
    // import data from &#39;./other/module.mjs&#39;;

    export default async ({ load }) =&gt; {
      // Reference other modules
      // const data = await load(&quot;./other/module.mjs&quot;);

      return {
        data: {
          pageTitle: &quot;My Single File Page&quot;,
        },
      };
    }
  &lt;/script&gt;
&lt;/template&gt;
</code></pre>
<p>In HTML files, use the <code>src</code> attribute of the <code>o-page</code> tag to specify the file path of the page module. The page content will be rendered inside this component.</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;My App&lt;/title&gt;
  &lt;script src=&quot;../../ofa.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;o-page src=&quot;./my-single-file-page.html&quot;&gt;&lt;/o-page&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2>Dual File Mode</h2>
<p>Dual file mode separates <code>static templates</code> and <code>logic code</code> to make the content of the web page clearer.</p>
<p>Here are the steps to use the <code>o-page</code> component and page modules:</p>
<p>Creating page module: .</p>
<p>Similar to creating a component module, create a page module but set the <code>type</code> attribute to <code>$.PAGE</code>. The available parameters for a page module include <code>temp</code>, <code>data</code>, <code>proto</code>, and <code>watch</code>.</p>
<pre><code class="language-javascript">// my-page.mjs
export const type = $.PAGE;

export const temp = &quot;./my-page-template.html&quot;;

export const data = {
  pageTitle: &quot;My Page&quot;,
};

export const proto = {
  // ...
};

export const watch = {
  // ...
};
</code></pre>
<p>Create page template: </p>
<p>In the same directory as the page module, create a page template file named <code>my-page-template.html</code>. In this template file, you can use template syntax for interaction, which is similar to the component template syntax mentioned earlier.</p>
<pre><code class="language-html">&lt;!-- my-page-template.html --&gt;
&lt;h1&gt;{{pageTitle}}&lt;/h1&gt;
&lt;p&gt;Welcome to my page!&lt;/p&gt;
</code></pre>
<p>In your HTML file, use the <code>&lt;o-page&gt;</code> tag to use the <code>o-page</code> component, and reference the file path of the page module through the <code>src</code> attribute. The content of the page will be rendered inside this component.</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;My App&lt;/title&gt;
  &lt;script src=&quot;../../ofa.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;o-page src=&quot;./my-page.mjs&quot;&gt;&lt;/o-page&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>In this way, when you open the page, the <code>o-page</code> component will dynamically load the <code>my-page.mjs</code> page module and render the page content based on the templates and data in the module. The lifecycle and template syntax of the page module are consistent with the component module, making page development and management more unified and flexible.</p>
<h2>Determine if the page has finished loading</h2>
<p>In some cases, you may need to determine whether the page has been fully loaded so that you can perform certain operations. <code>ofa.js</code> provides several methods to determine if the page has finished loading.</p>
<h3>Using the <code>page._loaded</code> property</h3>
<p>In the page module, <code>page._loaded</code> is a boolean attribute that becomes <code>true</code> when the page content is fully loaded. You can use this attribute to determine if the page has finished loading.</p>
<pre><code class="language-javascript">if (page._loaded) {
  // The page has been loaded
  // Perform your actions
} else {
  // Listen for the &#39;page-loaded&#39; event
  page.addEventListener(&#39;page-loaded&#39;, () =&gt; {
    // Actions to be performed after the page is loaded
  });
}
</code></pre>
<h3>Use the <code>page._rendered</code> property</h3>
<p>Another way is to use the <code>page._rendered</code> property, which is a Promise. When the page is loaded, this Promise will enter the <code>resolve</code> state. You can use <code>await page._rendered</code> to wait for the page to load, and then perform corresponding operations.</p>
<pre><code class="language-javascript">async function doSomethingAfterPageLoad() {
  await page._rendered;
  // The page has finished loading
  // Perform your operations
}
</code></pre>

    <article-footer></article-footer>
    </article>
        <script>
          export const parent = "https://cdn.jsdelivr.net/npm/obook@2.1.26/statics/layouts/article-layout.html";

          import pageInit from "https://cdn.jsdelivr.net/npm/obook@2.1.26/statics/document-page-init.mjs";

          export default async (...args) => {
            return await pageInit(PATH, args);
          };
        </script>
      </template>
    </o-app>
    <div id="loading"></div>
    <div class="body-important other-link"><ul>
<li><a href="../../cases/index.html">Getting Started</a></li>
<li><a href="../../cases/event.html">Event Handling</a></li>
<li><a href="../../cases/simple-component.html">Creating and Using Components</a></li>
<li><a href="../../cases/slot.html">Component Slots</a></li>
<li><a href="../../cases/render-text.html">Template Syntax: Rendering Text</a></li>
<li><a href="../../cases/attribute-transmission.html">Attribute Propagation</a></li>
<li><a href="../../cases/get-set-comp.html">Accessing and Modifying Component Instance Values</a></li>
<li><a href="../../cases/property-transmission.html">Template Syntax: Prop Binding</a></li>
<li><a href="../../cases/bind-event.html">Template Syntax: Event Binding</a></li>
<li><a href="../../cases/nested-component.html">Nested Components</a></li>
<li><a href="../../cases/inject-host.html">inject-host Component</a></li>
<li><a href="../../cases/event-passing.html">Event Propagation</a></li>
<li><a href="../../cases/sync.html">Template Syntax: Two-Way Data Binding</a></li>
<li><a href="../../cases/condition.html">Template Component: Conditional Rendering</a></li>
<li><a href="../../cases/fill.html">Template Component: Dynamic Rendering</a></li>
<li><a href="../../cases/fill-temp.html">Recursive Filling and Rendering</a></li>
<li><a href="../../cases/life-cycle.html">Lifecycle</a></li>
<li><a href="../../cases/form-data.html">Form Data</a></li>
<li><a href="../../cases/custom-form-element.html">Custom Form Components</a></li>
<li><a href="../../cases/use-page.html">Using Page Components</a></li>
<li><a href="../../cases/use-app.html">Using app Component</a></li>
<li><a href="../../cases/app-config.html">Configuring app Parameters</a></li>
<li><a href="../../cases/app-loading.html">Customizing app Loading</a></li>
<li><a href="../../cases/set404.html">Setting Up 404 Page</a></li>
<li><a href="../../cases/use-hash-router.html">Using Hash Router</a></li>
<li><a href="../../cases/use-scsr.html">Using SCSR Solution</a></li>
<li><a href="../introduce.html">Introduction</a></li>
<li><a href="../get-started/index.html">How to use ofa.js</a></li>
<li><a href="../get-started/hello-world.html">First Case</a></li>
<li><a href="../get-started/elements-and-events.html">Selection of Elements and Events</a></li>
<li><a href="../get-started/basic-concept.html">Basic Concepts of Instances</a></li>
<li><a href="../get-started/common-properties.html">Commonly Used Properties</a></li>
<li><a href="../get-started/common-function.html">Introduction to Common Methods</a></li>
<li><a href="../get-started/css.html">CSS</a></li>
<li><a href="../get-started/classlist-and-data.html">classList and data</a></li>
<li><a href="../get-started/box-model.html">Box Model</a></li>
<li><a href="../get-started/formdata.html">Form Data</a></li>
<li><a href="../create-component/index.html">Creation and Usage</a></li>
<li><a href="../create-component/parameter-description.html">Parameter Descriptions</a></li>
<li><a href="../create-component/life-cycle.html">Life Cycle</a></li>
<li><a href="../create-component/web-components.html">General Knowledge of Componentization</a></li>
<li><a href="../create-component/template-syntax.html">Template Syntax</a></li>
<li><a href="../create-component/template-component.html">Template Components</a></li>
<li><a href="index.html">Using o-app</a></li>
<li><a href="page.html">Using Page Components</a></li>
<li><a href="app.html">Using App Components</a></li>
<li><a href="subrouting.html">Subrouting</a></li>
<li><a href="o-router.html">Route Binding</a></li>
<li><a href="scsr.html">SCSR Solution</a></li>
<li><a href="../../others/data-sharing.html">Data Sharing</a></li>
<li><a href="../../others/about-micro-frontend.html">ofa.js and Micro Frontend</a></li>
<li><a href="../../index.html">English-index.html</a></li>
<li><a href="../../../cn/index.html">简体中文-index.html</a></li>
<li><a href="../../../t-cn/index.html">繁体中文-index.html</a></li>

</ul></div>
    <script src="https://cdn.jsdelivr.net/npm/obook@2.1.26/statics/init.js" type="module"></script>
  </body>
</html>
