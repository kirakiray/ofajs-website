<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Explanation of registration parameters for components</title>
        <script src="https://cdn.jsdelivr.net/gh/kirakiray/ofa.js@4.3.25/dist/ofa.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/gh/kirakiray/ofa.js@4.3.25/libs/scsr/scsr.mjs"
      type="module"
    ></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/css/public.css" />
    <style>
      html,
      body {
        height: 100%;
      }
    </style>
    <script>
      let configUrl = "../../config.json";
    </script>
    
        <link rel="shortcut icon" href="/favicon.png">
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7L1TCCJZT6"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag("js", new Date());

          gtag("config", "G-7L1TCCJZT6");
        </script>
        <script src="/init-sw.js"></script>
      
  </head>
  <body>
    <l-m src="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/comps/doc-container.html"></l-m>
    <l-m src="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/comps/doc-header/doc-header.html"></l-m>
    <o-app src="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/app-config.mjs">
      <template page>
        <style>
          .markdown-body::before,
          .markdown-body::after {
            display: block;
            content: "";
            height: 1px;
          }
          .markdown-body::after {
            height: 32px;
          }
        </style>
        <link
          rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/css/github-markdown.css"
        />
        <article class="markdown-body"><h1>Explanation of registration parameters for components</h1>
<p>In ofa.js, you can define certain specific registration parameters in the component module to configure the component more flexibly. The following explains each registration parameter in detail, accompanied by corresponding examples for demonstration.</p>
<h2>Basic Parameters</h2>
<p>Basic parameters are the most basic configuration for registering a component, which includes the following attributes:</p>
<h5>Component Identification</h5>
<p>The component module must have <code>export const type = $.COMP</code> to identify it as a component module.</p>
<p>Example: </p>
<pre><code class="language-javascript">// button-component.mjs
export const type = $.COMP;
</code></pre>
<h3>tag</h3>
<p><code>tag</code> represents the registered component name. When the <code>tag</code> attribute is not defined, the registered component name remains the same as the file name.</p>
<p>Example: </p>
<pre><code class="language-javascript">// button-component.mjs
export const type = $.COMP;
export const tag = &quot;my-button&quot;; // Register the component name as &#39;my-button&#39;
</code></pre>
<h3>temp</h3>
<p><code>temp</code> is a string-type property used to define the address of the component template. When <code>temp</code> is not defined, the HTML file with the same name as the component in the same directory as the current module will be loaded by default.</p>
<p>Example: </p>
<pre><code class="language-javascript">// button-component.mjs
export const type = $.COMP;
export const temp = &quot;./my-button-template.html&quot;; // 指定组件模板的地址为 &#39;./my-button-template.html&#39;
</code></pre>
<h3>data</h3>
<p><code>data</code> is an object-type property used to add default custom data to the generated component.</p>
<p>Example: </p>
<pre><code class="language-javascript">// button-component.mjs
export const type = $.COMP;
export const data = {
  count: 0,
};
</code></pre>
<h3>attrs</h3>
<p><code>attrs</code> is an object-type attribute, which also belongs to <code>data</code>, but this data will be reflected in the attributes of the element. Changes in the attributes will also dynamically change the <code>data</code> of the component. When there is a capital key, it will be transformed into a kebab-case naming in the component attribute.</p>
<p>Example: </p>
<pre><code class="language-javascript">// button-component.mjs
export const type = $.COMP;
export const attrs = {
  buttonText: &quot;Click Me&quot;,
};
</code></pre>
<h3>proto</h3>
<p>In the registration parameter of the component, you can add a <code>proto</code> object to define the methods that need to be added to the component prototype. In this way, when creating an instance of the component, these properties and methods will be added to the prototype of the instance, so that all instances can access and share these methods.</p>
<pre><code class="language-javascript">// MyComponent.js
export const type = $.COMP;

export const data = {
  count: 0,
};

export const proto = {
  sayHello() {
    alert(&#39;Hello Count:&#39;+ this.count);
  },
};
</code></pre>
<h3>watch</h3>
<p><code>watch</code> is an object type property used to listen to the changes of <code>data</code>. The listener function is placed here. After being successfully registered, the value being listened to will be executed immediately.</p>
<ul>
<li>The function registered with <code>watch</code> will only be triggered once during a single-threaded change. Therefore, even if the value being listened to is modified multiple times within a single thread, it will only be triggered once.</li>
<li>The first parameter is the current value.</li>
<li>The second parameter is an object that contains the <code>watchers</code> data set. In general, there will only be one object on <code>watchers</code>, and you can obtain the <code>oldValue</code> from this object. When the value being listened to in a single thread is changed multiple times, this data set will record the changes multiple times.</li>
</ul>
<p>Example: </p>
<pre><code class="language-javascript">// button-component.mjs
export const type = $.COMP;
export const data = {
  count: 0,
};
export const watch = {
  count(newValue, { watchers }) {
    let oldValue;
    if (watchers) {
      oldValue = watchers[0].oldValue;
    }
    console.log(`count changed from ${oldValue} to ${newValue}`);
  },
};
</code></pre>
<h2>Example code</h2>
<p>The following is a complete example code, including the definition of basic parameters and component templates.</p>
<pre><code class="language-javascript">// button-component.mjs
export const type = $.COMP;
export const tag = &quot;my-button&quot;;
export const temp = &quot;./my-button-template.html&quot;;

export const attrs = {
  buttonText: &quot;Click Me&quot;,
};

export const data = {
  count: 0,
};

export const watch = {
  count(newValue, { watchers }) {
    let oldValue;
    if (watchers) {
      oldValue = watchers[0].oldValue;
    }
    console.log(`count changed from ${oldValue} to ${newValue}`);
  },
};

export const proto = {
  sayHello() {
    alert(&quot;Hello Count:&quot; + this.count);
  },
};
</code></pre>
<pre><code class="language-html">&lt;!-- my-button-template.html --&gt;
&lt;style&gt;
  .shadow-button {
    background-color: #6b47fb;
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    border-radius: 10px;
    box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
    cursor: pointer;
  }
&lt;/style&gt;

&lt;!-- Use template rendering syntax to render component data as text --&gt;
&lt;button class=&quot;shadow-button&quot;&gt;{{buttonText}} - count:{{count}}&lt;/button&gt;
</code></pre>
<pre><code class="language-html">&lt;!-- demo.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;title&gt;my-button&lt;/title&gt;
    &lt;script src=&quot;../ofa.js&quot;&gt;&lt;/script&gt;
    &lt;l-m src=&quot;./button-component.mjs&quot;&gt;&lt;/l-m&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;my-button button-text=&quot;My Button&quot;&gt;&lt;/my-button&gt;
    &lt;script&gt;
      $(&quot;my-button&quot;).on(&quot;click&quot;, () =&gt; {
        $(&quot;my-button&quot;).count++;
      });

      setTimeout(() =&gt; {
        $(&quot;my-button&quot;).sayHello();
      }, 1000);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3>default</h3>
<p>You can also use asynchronous functions to define the <code>default</code> data, in order to dynamically return the registration parameters of the component.</p>
<p>Functions in JavaScript will introduce an object that includes</p>
<p><code>load</code>, <code>url</code>, and <code>query</code>:</p>
<ul>
<li>The <code>load</code> method is an asynchronous loading function, used in the same way as asynchronous <code>import</code> loading. You can use <code>const data = await load(xxx)</code> to load asynchronous modules.</li>
<li>Modules loaded through <code>load</code> have the same effect as modules loaded through <code>load-module</code>. The <code>load</code> method is a function version of the <code>load-module</code> component. For specific usage, you can refer to the documentation of <a href="https://github.com/kirakiray/drill.js">https://github.com/kirakiray/drill.js</a>.</li>
<li><code>url</code> is the file name of the current module.</li>
<li><code>query</code> is an object converted from the URL parameters when loading this module.</li>
</ul>
<p>Below are examples of using <code>default</code>:</p>
<pre><code class="language-javascript">// button-component.mjs
export const type = $.COMP; // This must be defined first and cannot be a dynamic parameter
export const tag = &quot;my-button&quot;;
export const temp = &quot;./my-button-template.html&quot;;

export default async function ({ load, url, query }) {
  console.log(&quot;url:&quot;, url); // Output the file name of the current module
  console.log(&quot;query:&quot;, query); // Output the object converted from the URL parameters of the current module

  const asyncData = await load(&quot;./async-data.mjs&quot;); // Use load to asynchronously load modules
  console.log(&quot;asyncData:&quot;, asyncData); // Output the asynchronously loaded module data

  return {
    data: {
      count: 0,
    },
    attrs: {
      buttonText: &quot;Click Me&quot;,
    },
    watch: {
      count(newValue, { watchers }) {
        let oldValue;
        if (watchers) {
          oldValue = watchers[0].oldValue;
        }
        console.log(`count changed from ${oldValue} to ${newValue}`);
      },
    },
    proto: {
      sayHello() {
        alert(&quot;Hello Count:&quot; + this.count);
      },
    },
  };
}
</code></pre>
<p>In this example, we demonstrate how to customize the behavior of components using the registration parameters of ofa.js. By configuring these parameters appropriately, you can better adapt to different component requirements and achieve more flexible component development.</p>
<p>Write a documentation on the use of the proto registration parameters for components.</p>

    <article-footer></article-footer>
    </article>
        <script>
          export const parent = "https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/layouts/article-layout.html";

          import pageInit from "https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/document-page-init.mjs";

          export default async (...args) => {
            return await pageInit(PATH, args);
          };
        </script>
      </template>
    </o-app>
    <div id="loading"></div>
    <div class="body-important other-link"><ul>
<li><a href="../../cases/index.html">Getting Started</a></li>
<li><a href="../../cases/event.html">Event Handling</a></li>
<li><a href="../../cases/simple-component.html">Creating and Using Components</a></li>
<li><a href="../../cases/slot.html">Component Slots</a></li>
<li><a href="../../cases/render-text.html">Template Syntax: Rendering Text</a></li>
<li><a href="../../cases/attribute-transmission.html">Attribute Propagation</a></li>
<li><a href="../../cases/get-set-comp.html">Accessing and Modifying Component Instance Values</a></li>
<li><a href="../../cases/property-transmission.html">Template Syntax: Prop Binding</a></li>
<li><a href="../../cases/bind-event.html">Template Syntax: Event Binding</a></li>
<li><a href="../../cases/nested-component.html">Nested Components</a></li>
<li><a href="../../cases/inject-host.html">inject-host Component</a></li>
<li><a href="../../cases/event-passing.html">Event Propagation</a></li>
<li><a href="../../cases/sync.html">Template Syntax: Two-Way Data Binding</a></li>
<li><a href="../../cases/condition.html">Template Component: Conditional Rendering</a></li>
<li><a href="../../cases/fill.html">Template Component: Dynamic Rendering</a></li>
<li><a href="../../cases/fill-temp.html">Recursive Filling and Rendering</a></li>
<li><a href="../../cases/life-cycle.html">Lifecycle</a></li>
<li><a href="../../cases/form-data.html">Form Data</a></li>
<li><a href="../../cases/custom-form-element.html">Custom Form Components</a></li>
<li><a href="../../cases/use-page.html">Using Page Components</a></li>
<li><a href="../../cases/use-app.html">Using app Component</a></li>
<li><a href="../../cases/app-config.html">Configuring app Parameters</a></li>
<li><a href="../../cases/app-loading.html">Customizing app Loading</a></li>
<li><a href="../../cases/set404.html">Setting Up 404 Page</a></li>
<li><a href="../../cases/use-hash-router.html">Using Hash Router</a></li>
<li><a href="../../cases/use-scsr.html">Using SCSR Solution</a></li>
<li><a href="../introduce.html">Introduction</a></li>
<li><a href="../get-started/index.html">How to use ofa.js</a></li>
<li><a href="../get-started/hello-world.html">First Case</a></li>
<li><a href="../get-started/elements-and-events.html">Selection of Elements and Events</a></li>
<li><a href="../get-started/basic-concept.html">Basic Concepts of Instances</a></li>
<li><a href="../get-started/common-properties.html">Commonly Used Properties</a></li>
<li><a href="../get-started/common-function.html">Introduction to Common Methods</a></li>
<li><a href="../get-started/css.html">CSS</a></li>
<li><a href="../get-started/classlist-and-data.html">classList and data</a></li>
<li><a href="../get-started/box-model.html">Box Model</a></li>
<li><a href="../get-started/formdata.html">Form Data</a></li>
<li><a href="index.html">Creation and Usage</a></li>
<li><a href="parameter-description.html">Parameter Descriptions</a></li>
<li><a href="life-cycle.html">Life Cycle</a></li>
<li><a href="web-components.html">General Knowledge of Componentization</a></li>
<li><a href="template-syntax.html">Template Syntax</a></li>
<li><a href="template-component.html">Template Components</a></li>
<li><a href="../create-app/index.html">Using o-app</a></li>
<li><a href="../create-app/page.html">Using Page Components</a></li>
<li><a href="../create-app/app.html">Using App Components</a></li>
<li><a href="../create-app/subrouting.html">Subrouting</a></li>
<li><a href="../create-app/o-router.html">Route Binding</a></li>
<li><a href="../create-app/scsr.html">SCSR Solution</a></li>
<li><a href="../../others/data-sharing.html">Data Sharing</a></li>
<li><a href="../../others/about-micro-frontend.html">ofa.js and Micro Frontend</a></li>
<li><a href="../../index.html">English-index.html</a></li>
<li><a href="../../../cn/index.html">简体中文-index.html</a></li>
<li><a href="../../../t-cn/index.html">繁体中文-index.html</a></li>

</ul></div>
    <script src="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/init.js" type="module"></script>
  </body>
</html>
