<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Lifecycle of Components</title>
        <script src="https://cdn.jsdelivr.net/gh/kirakiray/ofa.js@4.3.25/dist/ofa.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/gh/kirakiray/ofa.js@4.3.25/libs/scsr/scsr.mjs"
      type="module"
    ></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/css/public.css" />
    <style>
      html,
      body {
        height: 100%;
      }
    </style>
    <script>
      let configUrl = "../../config.json";
    </script>
    
        <link rel="shortcut icon" href="/favicon.png">
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7L1TCCJZT6"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag("js", new Date());

          gtag("config", "G-7L1TCCJZT6");
        </script>
        <script src="/init-sw.js"></script>
      
  </head>
  <body>
    <l-m src="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/comps/doc-container.html"></l-m>
    <l-m src="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/comps/doc-header/doc-header.html"></l-m>
    <o-app src="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/app-config.mjs">
      <template page>
        <style>
          .markdown-body::before,
          .markdown-body::after {
            display: block;
            content: "";
            height: 1px;
          }
          .markdown-body::after {
            height: 32px;
          }
        </style>
        <link
          rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/css/github-markdown.css"
        />
        <article class="markdown-body"><h1>The Lifecycle of Components</h1>
<p>In ofa.js, the component lifecycle is triggered by specific hooks at certain points in time. These hooks allow you to have more precise control and interaction. ofa.js has five key lifecycle hooks: <code>created</code>, <code>ready</code>, <code>watch</code>, <code>loaded</code>, <code>attached</code>, and <code>detached</code>, which are triggered at different times.</p>
<h2>Lifecycle Hooks</h2>
<h3>Created</h3>
<p><code>created</code> lifecycle hook is triggered when a component is created. At this stage, the component&#39;s data has not been initialized and the template content has not been rendered. You can perform some initialization operations at this stage or prepare data to be used in later stages.</p>
<h3>ready</h3>
<p><code>ready</code> lifecycle hook is triggered after the component&#39;s data and template are initialized, indicating that the component is ready. At this stage, you can access the component&#39;s data, and the template has been rendered, allowing you to perform some interactive operations related to the interface.</p>
<p>If the component template relies on other components, this stage will not wait for the dependencies to be loaded. Therefore, this stage is suitable for adding loading styles to the component, but it is important to wait for the dependencies to be loaded before performing related operations.</p>
<h3>watch</h3>
<p>Once the <code>ready</code> stage is completed, the listening function in the associated <code>watch</code> object will be triggered once. Afterwards, when a value of the data changes, the corresponding key&#39;s listening function will be triggered again.</p>
<h3>loaded</h3>
<p>The <code>loaded</code> lifecycle hook is triggered after all dependencies in the component template have been loaded. This stage ensures that all dependencies are loaded before rendering the component. This is a good time to remove the Loading style added during the <code>ready</code> stage.</p>
<h3>attached</h3>
<p><code>attached</code> lifecycle hook is triggered when the component is added to the document. At this stage, it is suitable for obtaining size-related information of the elements within the component, performing data binding, and global event operations.</p>
<h3>detached</h3>
<p><code>detached</code> lifecycle hook is triggered when a component is removed from the document. During this stage, you can perform some cleanup operations, such as unregistering event listeners or releasing resources, to prevent memory leaks.</p>
<h2>Examples and Demonstrations</h2>
<p>The following is an example demonstrating how to use these lifecycle hooks:</p>
<pre><code class="language-javascript">// lifecycle-demo.mjs
export const type = $.COMP;
export const tag = &quot;lifecycle-demo&quot;;
export const temp = &quot;./lifecycle-demo-template.html&quot;;

export default async function () {
  return {
    data: {
      count: 0,
    },
    watch: {
      count(count) {
        console.log(&quot;count: &quot;, count);
      },
    },
    created() {
      console.log(&quot;created: Component created, data not initialized.&quot;);
    },
    ready() {
      console.log(
        &quot;ready: Component is ready with initialized data and template.&quot;
      );

      this.on(&quot;click&quot;, () =&gt; {
        this.count++;
      });
    },
    attached() {
      console.log(&quot;attached: Component attached to DOM.&quot;);
    },
    detached() {
      console.log(&quot;detached: Component detached from DOM.&quot;);
    },
  };
}
</code></pre>
<pre><code class="language-html">&lt;!-- lifecycle-demo-template.html --&gt;
&lt;l-m src=&quot;../simple-button/simple-button.mjs&quot;&gt;&lt;/l-m&gt;
&lt;simple-button&gt;Click Me ({{count}})&lt;/simple-button&gt;
</code></pre>
<pre><code class="language-html">&lt;!-- lifecycle-demo.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;title&gt;Lifecycle Demo&lt;/title&gt;
    &lt;script src=&quot;../ofa.js&quot;&gt;&lt;/script&gt;
    &lt;l-m src=&quot;./lifecycle-demo.mjs&quot;&gt;&lt;/l-m&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;lifecycle-demo&gt;&lt;/lifecycle-demo&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>In the example above, we defined a component called <code>lifecycle-demo</code> and placed a button in its template. Through different lifecycle hooks, we can observe the logs triggered at each stage in the console.</p>
<h2>Lifecycle Flowchart</h2>
<img src="../../../publics/life-cycle.png" width="512" />

    <article-footer></article-footer>
    </article>
        <script>
          export const parent = "https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/layouts/article-layout.html";

          import pageInit from "https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/document-page-init.mjs";

          export default async (...args) => {
            return await pageInit(PATH, args);
          };
        </script>
      </template>
    </o-app>
    <div id="loading"></div>
    <div class="body-important other-link"><ul>
<li><a href="../../cases/index.html">Getting Started</a></li>
<li><a href="../../cases/event.html">Event Handling</a></li>
<li><a href="../../cases/simple-component.html">Creating and Using Components</a></li>
<li><a href="../../cases/slot.html">Component Slots</a></li>
<li><a href="../../cases/render-text.html">Template Syntax: Rendering Text</a></li>
<li><a href="../../cases/attribute-transmission.html">Attribute Propagation</a></li>
<li><a href="../../cases/get-set-comp.html">Accessing and Modifying Component Instance Values</a></li>
<li><a href="../../cases/property-transmission.html">Template Syntax: Prop Binding</a></li>
<li><a href="../../cases/bind-event.html">Template Syntax: Event Binding</a></li>
<li><a href="../../cases/nested-component.html">Nested Components</a></li>
<li><a href="../../cases/inject-host.html">inject-host Component</a></li>
<li><a href="../../cases/event-passing.html">Event Propagation</a></li>
<li><a href="../../cases/sync.html">Template Syntax: Two-Way Data Binding</a></li>
<li><a href="../../cases/condition.html">Template Component: Conditional Rendering</a></li>
<li><a href="../../cases/fill.html">Template Component: Dynamic Rendering</a></li>
<li><a href="../../cases/fill-temp.html">Recursive Filling and Rendering</a></li>
<li><a href="../../cases/life-cycle.html">Lifecycle</a></li>
<li><a href="../../cases/form-data.html">Form Data</a></li>
<li><a href="../../cases/custom-form-element.html">Custom Form Components</a></li>
<li><a href="../../cases/use-page.html">Using Page Components</a></li>
<li><a href="../../cases/use-app.html">Using app Component</a></li>
<li><a href="../../cases/app-config.html">Configuring app Parameters</a></li>
<li><a href="../../cases/app-loading.html">Customizing app Loading</a></li>
<li><a href="../../cases/set404.html">Setting Up 404 Page</a></li>
<li><a href="../../cases/use-hash-router.html">Using Hash Router</a></li>
<li><a href="../../cases/use-scsr.html">Using SCSR Solution</a></li>
<li><a href="../introduce.html">Introduction</a></li>
<li><a href="../get-started/index.html">How to use ofa.js</a></li>
<li><a href="../get-started/hello-world.html">First Case</a></li>
<li><a href="../get-started/elements-and-events.html">Selection of Elements and Events</a></li>
<li><a href="../get-started/basic-concept.html">Basic Concepts of Instances</a></li>
<li><a href="../get-started/common-properties.html">Commonly Used Properties</a></li>
<li><a href="../get-started/common-function.html">Introduction to Common Methods</a></li>
<li><a href="../get-started/css.html">CSS</a></li>
<li><a href="../get-started/classlist-and-data.html">classList and data</a></li>
<li><a href="../get-started/box-model.html">Box Model</a></li>
<li><a href="../get-started/formdata.html">Form Data</a></li>
<li><a href="index.html">Creation and Usage</a></li>
<li><a href="parameter-description.html">Parameter Descriptions</a></li>
<li><a href="life-cycle.html">Life Cycle</a></li>
<li><a href="web-components.html">General Knowledge of Componentization</a></li>
<li><a href="template-syntax.html">Template Syntax</a></li>
<li><a href="template-component.html">Template Components</a></li>
<li><a href="../create-app/index.html">Using o-app</a></li>
<li><a href="../create-app/page.html">Using Page Components</a></li>
<li><a href="../create-app/app.html">Using App Components</a></li>
<li><a href="../create-app/subrouting.html">Subrouting</a></li>
<li><a href="../create-app/o-router.html">Route Binding</a></li>
<li><a href="../create-app/scsr.html">SCSR Solution</a></li>
<li><a href="../../others/data-sharing.html">Data Sharing</a></li>
<li><a href="../../others/about-micro-frontend.html">ofa.js and Micro Frontend</a></li>
<li><a href="../../index.html">English-index.html</a></li>
<li><a href="../../../t-cn/index.html">繁体中文-index.html</a></li>
<li><a href="../../../cn/index.html">简体中文-index.html</a></li>

</ul></div>
    <script src="https://cdn.jsdelivr.net/npm/obook@2.1.30/statics/init.js" type="module"></script>
  </body>
</html>
